{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:base"
  ],
  "labels": ["dependency-update"],
  "automerge": true,
  "automergeStrategy": "squash",
  "automergeType": "pr",
  "platformAutomerge": true,
  "lockFileMaintenance": {
    "enabled": true
  },
  "packageRules": [
    {
      "matchDatasources": ["docker"],
      "addLabels": ["docker"]
    },
    {
      "matchManagers": ["terraform", "terraform-version"],
      "addLabels": ["terraform"]
    },
    {
      "matchManagers": ["circleci"],
      "addLabels": ["circleci"]
    },
    {
      "matchManagers": ["github-actions"],
      "groupName": "Github actions",
      "commitMessageExtra": ""
    },
    {
      "matchManagers": ["composer"],
      "addLabels": ["composer"]
    },
    {
      "matchDatasources": ["orb"],
      "addLabels": ["orb"]
    },
    {
      "matchUpdateTypes": ["major"],
      "addLabels": ["major"],
      "automerge": false
    },
    {
      "matchUpdateTypes": ["minor"],
      "addLabels": ["minor"]
    },
    {
      "matchUpdateTypes": ["patch"],
      "addLabels": ["patch"]
    },
    {
      "matchDatasources": ["helm"],
      "automerge": false,
      "addLabels": ["helm"]
    }
  ],
  "schedule": [
    "on sunday"
  ],
  "docker": {
    "addLabels": ["docker"],
    "packageRules": [
      {
        "matchUpdateTypes": ["major", "minor", "patch"],
        "prPriority": 5
      },
      {
        "matchUpdateTypes": ["minor"],
        "groupName": "Docker minor",
        "commitMessageExtra": ""
      },
      {
        "matchUpdateTypes": ["patch"],
        "groupName": "Docker patch",
        "commitMessageExtra": ""
      }
    ]
  },
  "java": {
    "addLabels": ["gradle"],
    "packageRules": [
      {
        "matchDataSources": ["gradle"],
        "matchPackagePatterns": ["com\\.equisoft\\.standards:"],
        "replacementNameTemplate": "{{{replace 'com\\.equisoft\\.standards:' 'com.equisoft.standards.gradle:' packageName}}}"
      },
      {
        "matchPackagePrefixes": ["com.equisoft", "io.equisoft"],
        "registryUrls": [
          "https://maven.pkg.github.com/kronostechnologies/*/",
          "https://maven.pkg.github.com/equisoft/*/"
        ]
      },
      {
        "matchUpdateTypes": ["minor"],
        "groupName": "Gradle minors",
        "commitMessageExtra": ""
      },
      {
        "matchUpdateTypes": ["major", "minor"],
        "matchPackagePrefixes": ["org.jetbrains.kotlin"],
        "groupName": "Kotlin"
      },
      {
        "matchUpdateTypes": ["major", "minor"],
        "matchPackagePrefixes": ["io.micronaut"],
        "groupName": "Micronaut"
      },
      {
        "matchUpdateTypes": ["minor"],
        "matchPackagePrefixes": ["com.equisoft", "io.equisoft"],
        "groupName": "Equisoft minors",
        "commitMessageExtra": ""
      },
      {
        "matchUpdateTypes": ["patch"],
        "groupName": "Gradle patches",
        "commitMessageExtra": ""
      }
    ]
  },
  "js": {
    "addLabels": ["yarn"],
    "packageRules": [
      {
        "matchUpdateTypes": ["patch"],
        "groupName": "Yarn patches",
        "commitMessageExtra": ""
      },
      {
        "matchUpdateTypes": ["minor"],
        "groupName": "Yarn minors",
        "commitMessageExtra": ""
      },
      {
        "matchUpdateTypes": ["major"],
        "matchPackageNames": ["@equisoft/design-elements-react"],
        "groupName": "Equisoft Design System"
      },
      {
        "matchUpdateTypes": ["major", "minor"],
        "matchPackageNames": [
          "i18next",
          "i18next-browser-languagedetector",
          "i18next-locize-backend",
          "react-i18next"
        ],
        "groupName": "i18next",
        "commitMessageExtra": ""
      },
      {
        "matchUpdateTypes": ["major", "minor"],
        "matchPackageNames": [
          "history",
          "react-router",
          "react-router-dom",
          "react-router-native"
        ],
        "groupName": "react-router",
        "commitMessageExtra": ""
      }
    ]
  },
  "php": {
    "addLabels": ["composer"],
    "packageRules": [
      {
        "matchUpdateTypes": ["minor"],
        "groupName": "PHP minors",
        "commitMessageExtra": ""
      },
      {
        "matchUpdateTypes": ["patch"],
        "groupName": "PHP patches",
        "commitMessageExtra": ""
      },
      {
        "matchUpdateTypes": ["minor", "patch"],
        "matchPackageNames": ["ocramius/proxy-manager"],
        "groupName": "proxy-manager"
      },
      {
        "matchUpdateTypes": ["minor", "patch"],
        "matchPackageNames": ["vimeo/psalm"],
        "groupName": "psalm"
      }
    ]
  },
  "regexManagers": [
    {
      "fileMatch": [
        "(^|/|\\.)([Dd]ocker|[Cc]ontainer)file$",
        "(^|/)([Dd]ocker|[Cc]ontainer)file[^/]*$"
      ],
      "matchStrings": [
        "#\\s*renovate:\\s*datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?\\s(ARG|ENV) .*?_VERSION=(?<currentValue>.*)\\s"
      ],
      "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}"
    }
  ]
}
